<div>

    <ng-container *ngTemplateOutlet="categories().length > 0 ? data : emptyData">

    </ng-container>

    <ng-template #data>
        <p-splitter
            [panelSizes]="[15, 85]"
            [style]="{ width: '100%', height: '100%'}">
            <ng-template pTemplate="panel">
                <div class="items-center justify-center h-full" [style]="{position: 'fixed'}">

                    <span class="text-surface-900 dark:text-surface-0 text-2xl !leading-tight mb-2">
                        Categorías
                    </span>
                    <div class="mt-3">
                        <p-listbox
                            [options]="categories()"
                            optionValue="value"
                            optionLabel="name"
                            emptyMessage="Sin datos disponibles"
                            class="w-full md:w-56 h-24rem"
                            [listStyle]="{'max-height': '220px'}"
                            (onClick)="selectCategorie($event)"
                        />
                    </div>
                    <p>
                        {{categoryName()}}
                    </p>
                </div>

            </ng-template>
            <ng-template pTemplate="panel">

                <div class="align-items-center justify-content-center" [style]="{position: 'relative'}">
                    <ng-container *ngTemplateOutlet="products().length > 0 ? isProducts : emptyproducts">

                    </ng-container>
                    <ng-template #isProducts>
                        <div class="card w-full p-1">
                            <p-toolbar>

                                <ng-template #start>
                                    <span class="text-surface-900 dark:text-surface-0 text-2xl !leading-tight">
                                        Productos
                                    </span>
                                    <i class="pi pi-box ml-2 mt-1" style="font-size: 2rem"></i>

                                </ng-template>
                                <ng-template #end>
                                    <p-iconfield iconPosition="left">
                                        <p-inputicon class="pi pi-search" />
                                        <input
                                            pInputText
                                            type="text"
                                            name = "searchValue"
                                            placeholder ="Buscar"
                                            [(ngModel)] = "searchValue"
                                            size="small"
                                        />
                                    </p-iconfield>
                                </ng-template>

                            </p-toolbar>
                        </div>
                        <div class="grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-4 border-round overflow-auto justify-content-center w-full min-w-full min-h-full border-round grid-products min-w-full m-1">
                            @for (product of products() | searchProduct: searchValue; track product  ) {

                                <app-product-details
                                    [product] = "product"
                                />

                            }
                        </div>

                    </ng-template>

                    <ng-template #emptyproducts>
                        <div class="flex align-items-center justify-content-center min-w-screen min-h-screen">
                            <i class="pi pi-search mr-2" style="font-size: 2rem"></i>
                            <span class="font-bold">Categoría "{{categoryName()}}", no tiene productos</span>
                        </div>
                    </ng-template>
                </div>

            </ng-template>

        </p-splitter>
    </ng-template>

    <ng-template #emptyData>
        <div class="flex align-items-center justify-content-center min-w-screen min-h-screen">
            <i class="pi pi-search mr-2" style="font-size: 2rem"></i>
            <span class="font-bold">Sin productos disponibles</span>
        </div>
    </ng-template>

 </div>


